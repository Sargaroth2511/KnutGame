@page
@model KnutGame.Pages.DocsModel
@{
    Layout = null;
    ViewData["Title"] = "Documentation";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <style>
        :root {
            --text: #222;
            --muted: #666;
            --bg: #fff;
            --border: #e5e7eb;
            --link: #2563eb;
            --link-hover: #1d4ed8;
            --code-bg: #f6f8fa;
        }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: var(--text); background: var(--bg); }
        .container { display: flex; height: 100vh; }
        .sidebar { width: 320px; border-right: 1px solid var(--border); overflow-y: auto; padding: 16px; }
        .content { flex: 1; overflow-y: auto; padding: 24px; }
        .file { margin: 6px 0; }
        a { color: var(--link); text-decoration: none; }
        a:hover { text-decoration: underline; color: var(--link-hover); }
        .path { color: var(--muted); font-size: 12px; }
        header { padding: 12px 16px; border-bottom: 1px solid var(--border); background: #fff; position: sticky; top: 0; z-index: 1; }
        header a { color: var(--link); }
        .toolbar { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; }
        .markdown-body { max-width: 960px; line-height: 1.6; }
        .markdown-body h1, .markdown-body h2, .markdown-body h3 { border-bottom: 1px solid var(--border); padding-bottom: .3em; margin-top: 1.5em; }
        .markdown-body pre { background: var(--code-bg); padding: 12px; overflow: auto; border-radius: 6px; }
        .markdown-body code { background: var(--code-bg); padding: 2px 4px; border-radius: 4px; }
        .markdown-body ul, .markdown-body ol { padding-left: 1.4em; }
        .markdown-body table { border-collapse: collapse; }
        .markdown-body table th, .markdown-body table td { border: 1px solid var(--border); padding: 6px 10px; }
    </style>
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="color-scheme" content="light dark" />
    <meta name="referrer" content="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#ffffff" />
</head>
<body>
    <header>
        <a href="/">‚Üê Back to Game</a>
    </header>
    <div class="container">
        <aside class="sidebar">
            <h3>Markdown Files</h3>
            @foreach (var f in Model.Files.OrderBy(f => f.RelativePath))
            {
                <div class="file">
                    <div><a href="/Docs?file=@Uri.EscapeDataString(f.RelativePath)">@System.IO.Path.GetFileName(f.RelativePath)</a></div>
                    <div class="path">@f.RelativePath</div>
                </div>
            }
        </aside>
        <main class="content">
            @if (!string.IsNullOrEmpty(Model.SelectedPath))
            {
                <div class="toolbar">
                    <h2 style="margin: 0;">@Model.SelectedPath</h2>
                    <a href="/Docs?handler=Download&amp;file=@Uri.EscapeDataString(Model.SelectedPath)" download>Download</a>
                </div>
                <div class="markdown-body">
                    @Html.Raw(Model.ContentHtml)
                </div>
            }
            else
            {
                <p>Select a file from the left to view its contents.</p>
            }
        </main>
    </div>
</body>
</html>
